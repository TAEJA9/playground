<!doctype html>
<html lang="ko">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìŠ¤í„°ë”” íƒ€ì´ë¨¸ Pro</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â°</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    * {
      box-sizing: border-box;
    }
    .tabular-nums {
      font-variant-numeric: tabular-nums;
    }
    .timer-display {
      transition: none;
    }
    .slider {
      -webkit-appearance: none;
      appearance: none;
      background: transparent;
      cursor: pointer;
    }
    .slider::-webkit-slider-track {
      background: #e2e8f0;
      height: 8px;
      border-radius: 4px;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .slider::-moz-range-track {
      background: #e2e8f0;
      height: 8px;
      border-radius: 4px;
      border: none;
    }
    .slider::-moz-range-thumb {
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .dark .slider::-webkit-slider-track {
      background: #475569;
    }
    .dark .slider::-moz-range-track {
      background: #475569;
    }
  </style>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a',
            }
          }
        }
      }
    }
  </script>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 min-h-full transition-colors duration-300">
  <div class="min-h-full p-6">
   <div class="max-w-7xl mx-auto"><!-- í—¤ë” -->
    <header class="mb-8">
     <div class="flex items-center justify-between flex-wrap gap-4">
      <div class="flex items-center gap-6">
       <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center text-white font-bold text-lg">
         â°
        </div><span class="text-xl font-bold text-primary-600 dark:text-primary-400"> TimerPro </span>
       </div>
       <div>
        <h1 class="text-4xl font-bold text-slate-900 dark:text-white mb-2">ìŠ¤í„°ë”” íƒ€ì´ë¨¸</h1>
        <div class="flex items-center gap-3 mb-2">
         <div id="date-label" class="px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">
         </div>
        </div>
        <p class="text-slate-600 dark:text-slate-400 text-sm">ì§‘ì¤‘-íœ´ì‹ ë¦¬ë“¬ì„ ì˜ˆì˜ê²Œ. ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ì‹œì‘/ì¼ì‹œì •ì§€, Rë¡œ ë¦¬ì…‹.</p>
       </div>
      </div>
      <div class="flex items-center gap-2"><button id="dark-toggle" class="inline-flex items-center justify-center rounded-xl h-10 w-10 text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 transition-all focus:outline-none focus:ring-2 focus:ring-primary-500">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg></button> <button id="sound-toggle" class="inline-flex items-center justify-center rounded-xl h-10 w-10 text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 transition-all focus:outline-none focus:ring-2 focus:ring-primary-500">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M11 5L6 9H2v6h4l5 4V5z"></path>
        </svg></button> <button id="notification-toggle" class="inline-flex items-center justify-center rounded-xl h-10 w-10 text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 transition-all focus:outline-none focus:ring-2 focus:ring-primary-500">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM10.07 2.82l3.12 3.12M7.05 5.84L4.93 7.96M2.82 10.07l3.12 3.12M5.84 16.95l2.12 2.12M10.07 21.18l3.12-3.12M16.95 18.16l2.12-2.12M21.18 13.93l-3.12-3.12M18.16 7.05l-2.12-2.12"></path>
        </svg></button>
      </div>
     </div>
    </header><!-- ë©”ì¸ ê·¸ë¦¬ë“œ -->
    <div class="grid lg:grid-cols-3 gap-6"><!-- íƒ€ì´ë¨¸ ì¹´ë“œ -->
     <div class="lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 transition-colors duration-300">
      <div class="flex flex-col items-center"><!-- ì„¸ì…˜ ì„ íƒ -->
       <div id="session-buttons" class="flex flex-wrap gap-2 mb-8 justify-center"><!-- ì„¸ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
       </div><!-- ì›í˜• ì§„í–‰ ë§ -->
       <div class="relative mb-8">
        <svg width="280" height="280" class="transform -rotate-90"><!-- ë°°ê²½ ì› --> <circle cx="140" cy="140" r="120" stroke="currentColor" stroke-width="12" fill="none" class="text-slate-200 dark:text-slate-700" /> <!-- ì§„í–‰ ì› --> <circle id="progress-circle" cx="140" cy="140" r="120" stroke="currentColor" stroke-width="12" fill="none" stroke-linecap="round" class="text-primary-500 transition-all duration-500" stroke-dasharray="0 753.98" />
        </svg><!-- ì¤‘ì•™ ì‹œê°„ í‘œì‹œ -->
        <div class="absolute inset-0 flex flex-col items-center justify-center">
         <div id="timer-display" class="text-6xl font-bold text-slate-900 dark:text-white tabular-nums timer-display">
          25:00
         </div>
         <div id="session-label" class="text-lg font-medium mt-2 text-primary-600 dark:text-primary-400">
          ì§‘ì¤‘
         </div>
        </div>
       </div><!-- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
       <div class="flex gap-4"><button id="play-pause-btn" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-11 px-6 py-2 bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 min-w-[120px]">
         <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9 4h10a1 1 0 001-1V7a1 1 0 00-1-1H7a1 1 0 00-1 1v10a1 1 0 001 1z"></path>
         </svg> ì‹œì‘ </button> <button id="reset-btn" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-10 w-10 border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
         </svg></button>
       </div><!-- í†µê³„ -->
       <div class="mt-8 text-center">
        <div class="text-sm text-slate-600 dark:text-slate-400">
         ì™„ë£Œí•œ ì§‘ì¤‘ ì„¸ì…˜
        </div>
        <div id="focus-count" class="text-3xl font-bold text-slate-900 dark:text-white mt-1">
         0
        </div>
       </div>
      </div>
     </div><!-- ì„¤ì • ì¹´ë“œ -->
     <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 transition-colors duration-300">
      <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-6">ì„¤ì •</h2><!-- ì„¸ì…˜ ê´€ë¦¬ -->
      <div class="mb-6">
       <div class="flex items-center justify-between mb-3"><label class="text-sm font-medium text-slate-700 dark:text-slate-300"> ì„¸ì…˜ ê´€ë¦¬ </label> <button id="add-session-btn" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500">
         <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
         </svg> ì„¸ì…˜ ì¶”ê°€ </button>
       </div>
       <div id="session-list" class="space-y-2 max-h-40 overflow-y-auto"><!-- ì„¸ì…˜ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
       </div>
      </div><!-- í”„ë¦¬ì…‹ -->
      <div class="mb-6">
       <div class="flex items-center justify-between mb-3"><label class="text-sm font-medium text-slate-700 dark:text-slate-300"> í”„ë¦¬ì…‹ </label> <button id="add-preset-btn" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500">
         <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
         </svg> ì¶”ê°€ </button>
       </div>
       <div class="flex flex-col gap-2"><button class="preset-btn inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 justify-start" data-preset="25,5,15"> í¬ëª¨ë„ë¡œ 25 / 5 / 15 </button> <button class="preset-btn inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 justify-start" data-preset="50,10,20"> ì§‘ì¤‘í˜• 50 / 10 / 20 </button> <button class="preset-btn inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 justify-start" data-preset="90,15,25"> ë”¥ì›Œí¬ 90 / 15 / 25 </button>
        <div id="custom-presets"><!-- ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
       </div>
      </div><!-- ê¸´ íœ´ì‹ ì£¼ê¸° ì„¤ì • -->
      <div class="mb-6"><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ê¸´ íœ´ì‹ ì£¼ê¸°: <span id="long-gap-value">4</span>íšŒë§ˆë‹¤ </label> <input type="range" id="long-gap-slider" min="2" max="10" step="1" value="4" class="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg slider">
      </div><!-- í† ê¸€ ì„¤ì • -->
      <div class="space-y-3 pt-4 border-t border-slate-200 dark:border-slate-700">
       <div class="flex items-center justify-between"><label class="text-sm font-medium text-slate-700 dark:text-slate-300"> ìë™ ë‹¤ìŒ ì„¸ì…˜ </label> <button id="auto-next-toggle" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 bg-primary-500"> <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6"></span> </button>
       </div>
      </div>
     </div>
    </div><!-- í‘¸í„° -->
    <footer class="mt-12 text-center">
     <p class="text-sm text-slate-500 dark:text-slate-400">Â© 2025 Team A4 ğŸ“ƒ</p>
    </footer>
   </div>
  </div><!-- ëª¨ë‹¬ë“¤ --> <!-- í”„ë¦¬ì…‹ ì¶”ê°€ ëª¨ë‹¬ -->
  <div id="preset-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
   <div class="fixed inset-0 bg-black/50" onclick="closePresetModal()"></div>
   <div class="relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
    <div class="p-6">
     <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹ ì¶”ê°€</h3>
     <div class="space-y-4">
      <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> í”„ë¦¬ì…‹ ì´ë¦„ </label> <input id="preset-name" type="text" placeholder="ì˜ˆ: ë‚˜ë§Œì˜ ì§‘ì¤‘ë²•" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
      </div>
      <div class="grid grid-cols-3 gap-3">
       <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ì§‘ì¤‘ (ë¶„) </label> <input id="preset-focus" type="number" min="1" max="120" value="25" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
       </div>
       <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ì§§ì€ íœ´ì‹ (ë¶„) </label> <input id="preset-short" type="number" min="1" max="30" value="5" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
       </div>
       <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ê¸´ íœ´ì‹ (ë¶„) </label> <input id="preset-long" type="number" min="1" max="60" value="15" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
       </div>
      </div>
     </div>
     <div class="flex gap-3 mt-6"><button onclick="closePresetModal()" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-11 px-6 py-2 border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 flex-1"> ì·¨ì†Œ </button> <button onclick="addCustomPreset()" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-11 px-6 py-2 bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 flex-1"> ì¶”ê°€ </button>
     </div>
    </div>
   </div>
  </div><!-- ì„¸ì…˜ ì¶”ê°€ ëª¨ë‹¬ -->
  <div id="session-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
   <div class="fixed inset-0 bg-black/50" onclick="closeSessionModal()"></div>
   <div class="relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
    <div class="p-6">
     <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">ì»¤ìŠ¤í…€ ì„¸ì…˜ ì¶”ê°€</h3>
     <div class="space-y-4">
      <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ì„¸ì…˜ ì´ë¦„ </label> <input id="session-name" type="text" placeholder="ì˜ˆ: ë”¥ì›Œí¬, ëª…ìƒ, ìš´ë™" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
      </div>
      <div class="grid grid-cols-2 gap-3">
       <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ì‹œê°„ (ë¶„) </label> <input id="session-duration" type="number" min="1" max="180" value="25" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500">
       </div>
       <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ìœ í˜• </label> <select id="session-type" class="flex h-11 w-full rounded-xl border-2 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500"> <option value="work">ì‘ì—…</option> <option value="break">íœ´ì‹</option> </select>
       </div>
      </div>
      <div><label class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"> ìƒ‰ìƒ </label>
       <div class="grid grid-cols-7 gap-2"><button onclick="selectSessionColor('primary')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-primary-500 border-slate-400 dark:border-slate-300 scale-110" data-color="primary"></button> <button onclick="selectSessionColor('emerald')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-emerald-500 border-slate-200 dark:border-slate-600" data-color="emerald"></button> <button onclick="selectSessionColor('blue')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-blue-500 border-slate-200 dark:border-slate-600" data-color="blue"></button> <button onclick="selectSessionColor('purple')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-purple-500 border-slate-200 dark:border-slate-600" data-color="purple"></button> <button onclick="selectSessionColor('orange')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-orange-500 border-slate-200 dark:border-slate-600" data-color="orange"></button> <button onclick="selectSessionColor('pink')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-pink-500 border-slate-200 dark:border-slate-600" data-color="pink"></button> <button onclick="selectSessionColor('indigo')" class="session-color-btn w-8 h-8 rounded-full border-2 transition-all bg-indigo-500 border-slate-200 dark:border-slate-600" data-color="indigo"></button>
       </div>
      </div>
     </div>
     <div class="flex gap-3 mt-6"><button onclick="closeSessionModal()" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-11 px-6 py-2 border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 flex-1"> ì·¨ì†Œ </button> <button onclick="addCustomSession()" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-11 px-6 py-2 bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 flex-1"> ì¶”ê°€ </button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // ì „ì—­ ë³€ìˆ˜
    let currentMode = 0;
    let isRunning = false;
    let remaining = 25 * 60;
    let focusCount = 0;
    let longGap = 4;
    let autoNext = true;
    let sound = true;
    let notification = false;
    let dark = false;
    let timerInterval = null;
    let selectedSessionColor = 'primary';

    // ê¸°ë³¸ ì„¸ì…˜ ë°ì´í„°
    let sessions = [
      { id: 0, name: 'ì§‘ì¤‘', duration: 25, color: 'primary', type: 'work' },
      { id: 1, name: 'ì§§ì€ íœ´ì‹', duration: 5, color: 'emerald', type: 'break' },
      { id: 2, name: 'ê¸´ íœ´ì‹', duration: 15, color: 'blue', type: 'break' }
    ];

    let customPresets = [];

    // ìƒ‰ìƒ ë§¤í•‘
    const colorClasses = {
      primary: 'text-primary-500',
      emerald: 'text-emerald-500',
      blue: 'text-blue-500',
      purple: 'text-purple-500',
      orange: 'text-orange-500',
      pink: 'text-pink-500',
      indigo: 'text-indigo-500'
    };

    // localStorage í•¨ìˆ˜ë“¤
    function saveToStorage() {
      localStorage.setItem('timer-data', JSON.stringify({
        currentMode,
        focusCount,
        longGap,
        autoNext,
        sound,
        notification,
        dark,
        sessions,
        customPresets
      }));
    }

    function loadFromStorage() {
      const data = localStorage.getItem('timer-data');
      if (data) {
        const parsed = JSON.parse(data);
        currentMode = parsed.currentMode || 0;
        focusCount = parsed.focusCount || 0;
        longGap = parsed.longGap || 4;
        autoNext = parsed.autoNext !== undefined ? parsed.autoNext : true;
        sound = parsed.sound !== undefined ? parsed.sound : true;
        notification = parsed.notification || false;
        dark = parsed.dark || false;
        sessions = parsed.sessions || sessions;
        customPresets = parsed.customPresets || [];
      }
    }

    // ë‚ ì§œ í‘œì‹œ í•¨ìˆ˜
    function updateDateLabel() {
      const now = new Date();
      const options = { 
        year: 'numeric', 
        month: '2-digit', 
        day: '2-digit',
        weekday: 'long'
      };
      const dateStr = now.toLocaleDateString('ko-KR', options)
        .replace(/\./g, '-')
        .replace(/-$/, '')
        .replace(' ', ' ');
      
      document.getElementById('date-label').textContent = dateStr;
    }

    // ë‹¤í¬ ëª¨ë“œ í† ê¸€
    function toggleDark() {
      dark = !dark;
      document.documentElement.classList.toggle('dark', dark);
      saveToStorage();
    }

    // ì‚¬ìš´ë“œ í† ê¸€
    function toggleSound() {
      sound = !sound;
      saveToStorage();
    }

    // ì•Œë¦¼ í† ê¸€
    function toggleNotification() {
      notification = !notification;
      if (notification && 'Notification' in window && Notification.permission === 'default') {
        Notification.requestPermission();
      }
      saveToStorage();
    }

    // ìë™ ë‹¤ìŒ ì„¸ì…˜ í† ê¸€
    function toggleAutoNext() {
      autoNext = !autoNext;
      const toggle = document.getElementById('auto-next-toggle');
      const span = toggle.querySelector('span');
      
      if (autoNext) {
        toggle.classList.add('bg-primary-500');
        toggle.classList.remove('bg-slate-300', 'dark:bg-slate-600');
        span.classList.add('translate-x-6');
        span.classList.remove('translate-x-1');
      } else {
        toggle.classList.remove('bg-primary-500');
        toggle.classList.add('bg-slate-300', 'dark:bg-slate-600');
        span.classList.remove('translate-x-6');
        span.classList.add('translate-x-1');
      }
      
      saveToStorage();
    }

    // ë¹„í”„ ì‚¬ìš´ë“œ ì¬ìƒ
    function playBeep() {
      if (!sound) return;
      try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = 800;
        oscillator.type = 'sine';
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
        
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.3);
      } catch (e) {
        console.error('Audio error:', e);
      }
    }

    // ì•Œë¦¼ í‘œì‹œ
    function showNotification(title, body) {
      if (!notification || !('Notification' in window)) return;
      if (Notification.permission === 'granted') {
        new Notification(title, { body, icon: 'â°' });
      }
    }

    // ì„¸ì…˜ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
    function getDuration(sessionId) {
      const session = sessions.find(s => s.id === sessionId);
      return session ? session.duration * 60 : 25 * 60;
    }

    // ëª¨ë“œ ë³€ê²½
    function changeMode(newMode) {
      currentMode = newMode;
      remaining = getDuration(newMode);
      isRunning = false;
      updateDisplay();
      updateSessionButtons();
      saveToStorage();
    }

    // íƒ€ì´ë¨¸ ì‹œì‘/ì¼ì‹œì •ì§€
    function toggleTimer() {
      isRunning = !isRunning;
      
      if (isRunning) {
        timerInterval = setInterval(() => {
          remaining--;
          if (remaining <= 0) {
            completeTimer();
          }
          updateDisplay();
        }, 1000);
      } else {
        if (timerInterval) {
          clearInterval(timerInterval);
        }
      }
      
      updatePlayPauseButton();
    }

    // íƒ€ì´ë¨¸ ë¦¬ì…‹
    function resetTimer() {
      isRunning = false;
      remaining = getDuration(currentMode);
      if (timerInterval) {
        clearInterval(timerInterval);
      }
      updateDisplay();
      updatePlayPauseButton();
    }

    // íƒ€ì´ë¨¸ ì™„ë£Œ
    function completeTimer() {
      isRunning = false;
      if (timerInterval) {
        clearInterval(timerInterval);
      }
      
      playBeep();
      
      const currentSession = sessions.find(s => s.id === currentMode);
      let nextSessionId = sessions[0].id;
      let message = '';
      
      if (currentSession?.type === 'work') {
        focusCount++;
        document.getElementById('focus-count').textContent = focusCount;
        
        // íœ´ì‹ ì„¸ì…˜ ì°¾ê¸°
        const breakSessions = sessions.filter(s => s.type === 'break');
        if (breakSessions.length > 0) {
          if (focusCount % longGap === 0) {
            // ê¸´ íœ´ì‹ ì°¾ê¸°
            const longBreak = breakSessions.find(s => s.name.includes('ê¸´')) || 
                             breakSessions.reduce((prev, curr) => prev.duration > curr.duration ? prev : curr);
            nextSessionId = longBreak.id;
            message = `${longBreak.name} ì‹œê°„ì…ë‹ˆë‹¤!`;
          } else {
            // ì§§ì€ íœ´ì‹ ì°¾ê¸°
            const shortBreak = breakSessions.find(s => s.name.includes('ì§§ì€')) || breakSessions[0];
            nextSessionId = shortBreak.id;
            message = `${shortBreak.name} ì‹œê°„ì…ë‹ˆë‹¤!`;
          }
        }
      } else {
        // íœ´ì‹ í›„ì—ëŠ” ì‘ì—… ì„¸ì…˜ìœ¼ë¡œ
        const workSessions = sessions.filter(s => s.type === 'work');
        if (workSessions.length > 0) {
          nextSessionId = workSessions[0].id;
          message = `${workSessions[0].name} ì‹œê°„ì…ë‹ˆë‹¤!`;
        }
      }
      
      showNotification('íƒ€ì´ë¨¸ ì™„ë£Œ', message);
      
      if (autoNext) {
        setTimeout(() => {
          currentMode = nextSessionId;
          remaining = getDuration(nextSessionId);
          isRunning = true;
          updateDisplay();
          updateSessionButtons();
          updatePlayPauseButton();
          
          timerInterval = setInterval(() => {
            remaining--;
            if (remaining <= 0) {
              completeTimer();
            }
            updateDisplay();
          }, 1000);
        }, 600);
      } else {
        currentMode = nextSessionId;
        remaining = getDuration(nextSessionId);
        updateDisplay();
        updateSessionButtons();
        updatePlayPauseButton();
      }
      
      saveToStorage();
    }

    // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
    function updateDisplay() {
      const minutes = Math.floor(remaining / 60);
      const seconds = remaining % 60;
      const timeStr = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      
      document.getElementById('timer-display').textContent = timeStr;
      
      const currentSession = sessions.find(s => s.id === currentMode) || sessions[0];
      document.getElementById('session-label').textContent = currentSession.name;
      
      // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
      const progress = 1 - (remaining / getDuration(currentMode));
      const circumference = 753.98;
      const progressCircle = document.getElementById('progress-circle');
      progressCircle.style.strokeDasharray = `${circumference * progress} ${circumference}`;
      
      // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      const isLastTenSeconds = remaining <= 10 && remaining > 0;
      if (isLastTenSeconds) {
        progressCircle.className = 'text-red-500 transition-all duration-500';
        document.getElementById('session-label').className = 'text-lg font-medium mt-2 text-red-500 dark:text-red-400';
      } else {
        progressCircle.className = `${colorClasses[currentSession.color]} transition-all duration-500`;
        document.getElementById('session-label').className = `text-lg font-medium mt-2 ${colorClasses[currentSession.color]}`;
      }
    }

    // ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
    function updatePlayPauseButton() {
      const btn = document.getElementById('play-pause-btn');
      const svg = btn.querySelector('svg');
      const text = btn.querySelector('svg').nextSibling;
      
      if (isRunning) {
        svg.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>';
        btn.childNodes[2].textContent = 'ì¼ì‹œì •ì§€';
      } else {
        svg.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9 4h10a1 1 0 001-1V7a1 1 0 00-1-1H7a1 1 0 00-1 1v10a1 1 0 001 1z"></path>';
        btn.childNodes[2].textContent = 'ì‹œì‘';
      }
    }

    // ì„¸ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
    function updateSessionButtons() {
      const container = document.getElementById('session-buttons');
      container.innerHTML = '';
      
      sessions.forEach(session => {
        const button = document.createElement('button');
        button.className = `inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm ${
          currentMode === session.id 
            ? 'bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500' 
            : 'border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500'
        }`;
        button.textContent = session.name;
        button.disabled = isRunning;
        button.onclick = () => changeMode(session.id);
        container.appendChild(button);
      });
    }

    // ì„¸ì…˜ ëª©ë¡ ì—…ë°ì´íŠ¸
    function updateSessionList() {
      const container = document.getElementById('session-list');
      container.innerHTML = '';
      
      sessions.forEach(session => {
        const div = document.createElement('div');
        div.className = 'flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700 rounded-lg';
        
        div.innerHTML = `
          <div class="flex-1">
            <div class="text-sm font-medium text-slate-900 dark:text-white">
              ${session.name}
            </div>
            <div class="text-xs text-slate-500 dark:text-slate-400">
              ${session.duration}ë¶„ â€¢ ${session.type === 'work' ? 'ì‘ì—…' : 'íœ´ì‹'}
            </div>
          </div>
          ${sessions.length > 1 ? `
            <button onclick="deleteSession(${session.id})" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm text-red-500 hover:text-red-600 px-2">
              Ã—
            </button>
          ` : ''}
        `;
        
        container.appendChild(div);
      });
    }

    // ì„¸ì…˜ ì‚­ì œ
    function deleteSession(id) {
      if (sessions.length <= 1) return;
      sessions = sessions.filter(s => s.id !== id);
      if (currentMode === id) {
        currentMode = sessions[0].id;
        remaining = getDuration(currentMode);
      }
      updateSessionButtons();
      updateSessionList();
      updateDisplay();
      saveToStorage();
    }

    // í”„ë¦¬ì…‹ ì ìš©
    function applyPreset(focus, short, long) {
      sessions = [
        { id: 0, name: 'ì§‘ì¤‘', duration: focus, color: 'primary', type: 'work' },
        { id: 1, name: 'ì§§ì€ íœ´ì‹', duration: short, color: 'emerald', type: 'break' },
        { id: 2, name: 'ê¸´ íœ´ì‹', duration: long, color: 'blue', type: 'break' }
      ];
      
      const currentSession = sessions.find(s => s.id === currentMode);
      if (currentSession) {
        remaining = currentSession.duration * 60;
      } else {
        currentMode = 0;
        remaining = focus * 60;
      }
      
      updateSessionButtons();
      updateSessionList();
      updateDisplay();
      saveToStorage();
    }

    // ëª¨ë‹¬ í•¨ìˆ˜ë“¤
    function openPresetModal() {
      document.getElementById('preset-modal').classList.remove('hidden');
      document.getElementById('preset-modal').classList.add('flex');
    }

    function closePresetModal() {
      document.getElementById('preset-modal').classList.add('hidden');
      document.getElementById('preset-modal').classList.remove('flex');
    }

    function openSessionModal() {
      document.getElementById('session-modal').classList.remove('hidden');
      document.getElementById('session-modal').classList.add('flex');
    }

    function closeSessionModal() {
      document.getElementById('session-modal').classList.add('hidden');
      document.getElementById('session-modal').classList.remove('flex');
    }

    // ì„¸ì…˜ ìƒ‰ìƒ ì„ íƒ
    function selectSessionColor(color) {
      selectedSessionColor = color;
      document.querySelectorAll('.session-color-btn').forEach(btn => {
        if (btn.dataset.color === color) {
          btn.classList.add('border-slate-400', 'dark:border-slate-300', 'scale-110');
          btn.classList.remove('border-slate-200', 'dark:border-slate-600');
        } else {
          btn.classList.remove('border-slate-400', 'dark:border-slate-300', 'scale-110');
          btn.classList.add('border-slate-200', 'dark:border-slate-600');
        }
      });
    }

    // ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹ ì¶”ê°€
    function addCustomPreset() {
      const name = document.getElementById('preset-name').value.trim();
      const focus = parseInt(document.getElementById('preset-focus').value);
      const short = parseInt(document.getElementById('preset-short').value);
      const long = parseInt(document.getElementById('preset-long').value);
      
      if (!name) return;
      
      const preset = {
        id: Date.now(),
        name,
        focus,
        short,
        long
      };
      
      customPresets.push(preset);
      updateCustomPresets();
      saveToStorage();
      closePresetModal();
      
      // ì…ë ¥ í•„ë“œ ë¦¬ì…‹
      document.getElementById('preset-name').value = '';
      document.getElementById('preset-focus').value = '25';
      document.getElementById('preset-short').value = '5';
      document.getElementById('preset-long').value = '15';
    }

    // ì»¤ìŠ¤í…€ ì„¸ì…˜ ì¶”ê°€
    function addCustomSession() {
      const name = document.getElementById('session-name').value.trim();
      const duration = parseInt(document.getElementById('session-duration').value);
      const type = document.getElementById('session-type').value;
      
      if (!name) return;
      
      const session = {
        id: Math.max(...sessions.map(s => s.id), -1) + 1,
        name,
        duration,
        color: selectedSessionColor,
        type
      };
      
      sessions.push(session);
      updateSessionButtons();
      updateSessionList();
      saveToStorage();
      closeSessionModal();
      
      // ì…ë ¥ í•„ë“œ ë¦¬ì…‹
      document.getElementById('session-name').value = '';
      document.getElementById('session-duration').value = '25';
      document.getElementById('session-type').value = 'work';
      selectSessionColor('primary');
    }

    // ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹ ì—…ë°ì´íŠ¸
    function updateCustomPresets() {
      const container = document.getElementById('custom-presets');
      container.innerHTML = '';
      
      customPresets.forEach(preset => {
        const div = document.createElement('div');
        div.className = 'flex items-center gap-2';
        
        div.innerHTML = `
          <button onclick="applyPreset(${preset.focus}, ${preset.short}, ${preset.long})" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm border-2 border-primary-300 text-primary-600 hover:bg-primary-50 dark:border-primary-600 dark:text-primary-400 dark:hover:bg-primary-900/20 focus:ring-primary-500 justify-start flex-1">
            ${preset.name} ${preset.focus} / ${preset.short} / ${preset.long}
          </button>
          <button onclick="deleteCustomPreset(${preset.id})" class="inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 h-9 px-4 text-sm text-red-500 hover:text-red-600 px-2">
            Ã—
          </button>
        `;
        
        container.appendChild(div);
      });
    }

    // ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹ ì‚­ì œ
    function deleteCustomPreset(id) {
      customPresets = customPresets.filter(p => p.id !== id);
      updateCustomPresets();
      saveToStorage();
    }

    // ê¸´ íœ´ì‹ ì£¼ê¸° ìŠ¬ë¼ì´ë” ì—…ë°ì´íŠ¸
    function updateLongGapSlider() {
      const slider = document.getElementById('long-gap-slider');
      const value = document.getElementById('long-gap-value');
      
      slider.addEventListener('input', (e) => {
        longGap = parseInt(e.target.value);
        value.textContent = longGap;
        saveToStorage();
      });
    }

    // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
    function setupKeyboardEvents() {
      document.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
          e.preventDefault();
          toggleTimer();
        } else if (e.code === 'KeyR') {
          e.preventDefault();
          resetTimer();
        }
      });
    }

    // ì´ˆê¸°í™”
    function init() {
      loadFromStorage();
      updateDateLabel();
      
      // ë‹¤í¬ ëª¨ë“œ ì ìš©
      document.documentElement.classList.toggle('dark', dark);
      
      // ìë™ ë‹¤ìŒ ì„¸ì…˜ í† ê¸€ ìƒíƒœ ì„¤ì •
      const toggle = document.getElementById('auto-next-toggle');
      const span = toggle.querySelector('span');
      
      if (autoNext) {
        toggle.classList.add('bg-primary-500');
        toggle.classList.remove('bg-slate-300', 'dark:bg-slate-600');
        span.classList.add('translate-x-6');
        span.classList.remove('translate-x-1');
      } else {
        toggle.classList.remove('bg-primary-500');
        toggle.classList.add('bg-slate-300', 'dark:bg-slate-600');
        span.classList.remove('translate-x-6');
        span.classList.add('translate-x-1');
      }
      
      // ê¸´ íœ´ì‹ ì£¼ê¸° ìŠ¬ë¼ì´ë” ì„¤ì •
      document.getElementById('long-gap-slider').value = longGap;
      document.getElementById('long-gap-value').textContent = longGap;
      
      // ì§‘ì¤‘ ì„¸ì…˜ ì¹´ìš´íŠ¸ ì„¤ì •
      document.getElementById('focus-count').textContent = focusCount;
      
      // UI ì—…ë°ì´íŠ¸
      updateDisplay();
      updateSessionButtons();
      updateSessionList();
      updateCustomPresets();
      updateLongGapSlider();
      setupKeyboardEvents();
      
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
      document.getElementById('dark-toggle').onclick = toggleDark;
      document.getElementById('sound-toggle').onclick = toggleSound;
      document.getElementById('notification-toggle').onclick = toggleNotification;
      document.getElementById('play-pause-btn').onclick = toggleTimer;
      document.getElementById('reset-btn').onclick = resetTimer;
      document.getElementById('auto-next-toggle').onclick = toggleAutoNext;
      document.getElementById('add-preset-btn').onclick = openPresetModal;
      document.getElementById('add-session-btn').onclick = openSessionModal;
      
      // í”„ë¦¬ì…‹ ë²„íŠ¼ ì´ë²¤íŠ¸
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.onclick = () => {
          const [focus, short, long] = btn.dataset.preset.split(',').map(Number);
          applyPreset(focus, short, long);
        };
      });
      
      // ì—”í„°í‚¤ë¡œ ëª¨ë‹¬ ì¶”ê°€
      document.getElementById('preset-name').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') addCustomPreset();
      });
      
      document.getElementById('session-name').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') addCustomSession();
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', init);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99a7dbdab1a1ea33',t:'MTc2MjQ2NjM3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>